@{
	ViewData["Title"] = "Edulearn | Flags";
}

<link rel="stylesheet" href="~/wwwroot/css/Flag.css" />
<link rel="stylesheet" href="~/wwwroot/css/library.css" />
<!-- Wrapper -->
<div id="wrapper">
	<!-- Main -->
	<div id="main">
		<div class="inner">
			<!-- Header -->
			<header id="header">

				<!-- Home Back Button -->
				<a onclick="BackFunc()" class="bbutton">
					<div class="home-back-button">
						<i class="fa fa-arrow-left  fa-fw" aria-hidden="true"></i>Back
					</div>
				</a>

				<div class="main-cont">
					<div id="time-i">
						<h1>-</h1>
					</div>
					<div id="date-i">
						<h1>-</h1>
					</div>
					<div id="day-i">
						<h1>-</h1>
					</div>
				</div>
			</header>

			<!-- Content -->
			<header class="main">
				<h2 style="margin-bottom: 0 !important; text-align: center; margin-top: 20px;">Country Flags</h2>
				<p style="text-align: center">Let's discover different Country Flags!</p>
			</header>

			<div class="container">
				<form id="form" class="form">
					<button type="submit" class="search-btn">
						<i class="fas fa-search"></i>
					</button>
					<input type="text" id="search" placeholder="Search for any country..." autocomplete="off" autofocus />
				</form>

				<div id="heading" class="heading"></div>

				<div id="countries" class="countries"></div>
			</div>
		</div>
	</div>

	<!-- Sidebar -->
	<div id="sidebar">
		<div class="inner">

			<!-- Menu -->
			<nav id="menu">
				<header class="major">
					<h2>Menu</h2>
				</header>

				<ul>
					<li>@Html.ActionLink("General", "Library", "Home")</li>
					<li>

						<span class="opener">Web Directory</span>
						<ul>
							<li>@Html.ActionLink("English", "EnglishD", "Home", null)</li>
							<li>@Html.ActionLink("Math", "MathD", "Home", null)</li>
							<li>@Html.ActionLink("Filipino", "FilipinoD", "Home", null)</li>
							<li>@Html.ActionLink("Science", "ScienceD", "Home", null)</li>
						</ul>
					</li>
					<li>
						<span class="opener">Modules</span>
						<ul>
							<li>@Html.ActionLink("Kindergarten", "Kindergarten", "Modules")</li>
							<li>@Html.ActionLink("Elementary", "Elementary", "Modules")</li>
							<li>@Html.ActionLink("Junior High School", "Junior_high", "Modules")</li>
							<li>@Html.ActionLink("Senior High School", "Senior_high", "Modules")</li>
						</ul>
					</li>
					<li>
						<span class="opener">Tables & Charts</span>
						<ul>
							<li>@Html.ActionLink("Flags", "Flags", "Home", null)</li>
							<li>@Html.ActionLink("Numbers", "NumberChart", "Home", null)</li>
							<li>@Html.ActionLink("Letters", "LetterChart", "Home", null)</li>
							<li>@Html.ActionLink("Shapes", "Shapes", "Home", null)</li>
							<li>@Html.ActionLink("Colors", "Color", "Home", null)</li>
							<li>@Html.ActionLink("Body Parts", "BodyParts", "Home", null)</li>
							<li>@Html.ActionLink("Multiplication Table", "MultiplicationTable", "Home", null)</li>
						</ul>
					</li>
					<li>
						<span class="opener">Maps</span>
						<ul>
							<li>@Html.ActionLink("World Map", "World", "Home", null)</li>
							<li>@Html.ActionLink("Country Map", "Country", "Home", null)</li>
							<li>@Html.ActionLink("Google Map", "Google", "Home", null)</li>
						</ul>
					</li>
					<li>
						<span class="opener">Videos</span>
						<ul>
							<li>@Html.ActionLink("Youtube", "Youtube", "Home", null)</li>
							<li>@Html.ActionLink("Chanel Recommendation", "Channels", "Home", null)</li>
						</ul>
					</li>
					<li>
						<span class="opener">eBooks</span>
						<ul>
							<li>@Html.ActionLink("Google Ebooks", "Ebook", "Home", null)</li>
							<li>@Html.ActionLink("Ebooks Web Directory", "eBooksD", "Home", null)</li>
						</ul>
					</li>
					<li>@Html.ActionLink("Trivia", "Trivia", "Home", null)</li>
					<li>@Html.ActionLink("Dictionary", "Dictionary", "Home", null)</li>
					<li>@Html.ActionLink("Study Tips", "StudyTips", "Home", null)</li>
				</ul>
			</nav>

			<!-- Section -->
			<!-- Footer -->
			<footer id="footer">
				<p class="copyright">&copy; HPM. All rights reserved. </p>
			</footer>
		</div>
	</div>
</div>
<script>

	var BackFunc = function () {

		var baseUrl="@Url.Action("Back","Login")";
   window.location.href=baseUrl;

	}
</script>
<!-- Library script -->
<script src="~/wwwroot/js/jquery.min.js"></script>
<script src="https://use.fontawesome.com/c0d25df00f.js"></script>
<script src="~/wwwroot/js/browser.min.js"></script>
<script src="~/wwwroot/js/breakpoints.min.js"></script>
<script src="~/wwwroot/js/util.js"></script>
<script src="~/wwwroot/js/library.js"></script>
<script>

	/* The design was taken from https://www.frontendmentor.io/challenges/rest-countries-api-with-color-theme-switcher-5cacc469fec04111f7b848ca */

	const form = document.getElementById("form");
	const search = document.getElementById("search");
	const heading = document.getElementById("heading");
	const countries = document.getElementById("countries");

	// All countries
	const allCountries = () => {
		fetch(`https://restcountries.eu/rest/v2/all`)
			.then((res) => res.json())
			.then((data) => {
				console.log(data);

				heading.innerHTML = `<h3>There are total <span>${data.length}</span> countries</h3>`;

				countries.innerHTML = data
					.map(
						(item) => `

			<div class = 'country'>

				<img src = '${item.flag}' />

				<div class = 'country-body'>

					<h3>${item.name}</h3>
					<h4>Region: ${item.region}</h4>
					<h4>Capital: ${item.capital}</h4>
					<h4>Population: ${item.population}</h4>

				</div>

			</div>

		`
					)
					.join("");
			});
	};

	// Search for country
	const searchCountry = (e) => {
		const searchTerm = search.value.trim();

		fetch(`https://restcountries.eu/rest/v2/name/${searchTerm}`)
			.then((res) => res.json())
			.then((data) => {
				console.log(data);

				const error = (data.status = 404);

				if (heading.length === 0) {
					heading.innerHTML = `No countries found</h3>`;
				} else {
					heading.innerHTML = `<h3> <span>${data.length}</span> countries found</h3>`;

					countries.innerHTML = data
						.map(
							(item) => `

					<div class = 'country'>

						<img src = '${item.flag}' />

						<div class = 'country-body'>

							<h3>${item.name}</h3>
							<h4>Region: ${item.region}</h4>
							<h4>Capital: ${item.capital}</h4>
							<h4>Population: ${item.population}</h4>

						</div>

					</div>

				`
						)
						.join("");
				}
			});

		e.preventDefault();
	};

	// Initialize functions
	const init = () => {
		allCountries();
	};

	init();

	// Event listeners
	form.addEventListener("submit", searchCountry);
</script>